{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Add ic-domains allowlist asset and document apex + www ICP gateway registration steps",
  "requirements": [
    {
      "id": "REQ-3",
      "summary": "Add IC well-known ic-domains allowlist asset serving apex and www hostnames",
      "acceptanceCriteria": [
        "A new static asset file is added under the frontend public assets (use the standard IC well-known location) containing newline-separated domains including `myrepubicnetwork.web.id` and `www.myrepubicnetwork.web.id`.",
        "After building the frontend, the `ic-domains` file is present in the final canister assets at `/.well-known/ic-domains` (or the IC-supported path used by the asset canister) and returns the expected contents when fetched.",
        "No changes are made to any frontend immutable paths listed in SYSTEM_CONTEXT."
      ],
      "file_operations": [
        {
          "path": "frontend/public/.well-known/ic-domains",
          "operation": "create",
          "description": "Create the IC well-known allowlist file with newline-separated hostnames: `myrepubicnetwork.web.id` and `www.myrepubicnetwork.web.id`, so it is bundled into the built static assets and served by the frontend canister at runtime."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Update custom-domain documentation with required redeploy + separate apex and www ICP gateway registrations and verification",
      "acceptanceCriteria": [
        "`frontend/docs/custom-domain.md` is updated to include a clear section for enabling the apex/root domain, including: (1) add domain to `ic-domains`, (2) redeploy the frontend canister, (3) run `curl -X POST -H 'Content-Type: application/json' https://icp0.io/registrations --data '{\"name\": \"myrepubicnetwork.web.id\"}'` as a separate step.",
        "Documentation also includes the analogous POST registration command for `www.myrepubicnetwork.web.id` (if not already present) and clarifies that `www` and apex are separate registrations.",
        "Documentation includes a verification step using `https://icp0.io/registrations/<id>` to check status (e.g., pending/available/failed)."
      ],
      "file_operations": [
        {
          "path": "frontend/docs/custom-domain.md",
          "operation": "modify",
          "description": "Expand/repair the guide to include an explicit section for enabling the apex/root custom domain on the ICP gateway: (1) add apex + www to `/.well-known/ic-domains`, (2) redeploy the frontend canister after updating the file, (3) run separate `curl -X POST ...` registrations for `myrepubicnetwork.web.id` and `www.myrepubicnetwork.web.id`, and (4) add a verification step using `https://icp0.io/registrations/<id>` to check status."
        }
      ]
    }
  ]
}